{"version":3,"sources":["../src/utils.ts","../src/wire_state_to_actions.ts","../src/patch.ts","../src/index.ts","../src/h.ts","index.tsx"],"names":[],"mappings":"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","file":"9821049c810d2aae2fd87fcf96b70092.map","sourcesContent":["import { vnode } from './interface'\n\nexport const invokeLaterStack = []\n\n// 根据vnode创建真实DOM元素\nexport function createElement(node: vnode, isSVG?) {\n  let element = isSVG ? document.createElementNS('http://www.w3.org/2000/svg', node.name)\n    : document.createElement(node.name)\n\n  for (let i = 0, l = node.children.length; i < l; i++) {\n    let child = node.children[i]\n    if (typeof child === 'string' || typeof child === 'number') {\n      element.appendChild(document.createTextNode(child))\n    } else {\n      element.appendChild(createElement(child, isSVG))\n    }\n  }\n\n  for (let name in node.props) {\n    setELementProps(element, name, node.props[name], isSVG)\n  }\n\n  if (node.props && node.props.oncreate) {\n    invokeLaterStack.push(() => node.props.oncreate(element, node))\n  }\n\n  return element\n}\n\n// 当参数是个对象时，我们希望得到的是一个非引用对象。\nexport function setELementProps(element: HTMLElement | SVGElement, prop: string, value: null | string | Object | Function, isSVG: boolean, oldvalue?: null | string | Object | Function) {\n  if (prop !== 'key') {\n    if (prop === 'style') {\n      if (value === '' || value === null) {\n        element.style.cssText = ''\n      } else if (typeof value === 'object') {\n        // 合并新老对象, 以新的对象为准，这样 当存在oldvalue属性不存在与value时，会被去除\n        for (let key in copy(oldvalue, value)) {\n          element.style[key] = value[key] || ''\n        }\n      }\n    } else if (typeof value === 'function' || prop in element && !isSVG) {\n      element[prop] = value === null ? '' : value\n    } else if (value !== null && value !== false && typeof value !== 'object') {\n      element.setAttribute(prop, value)\n    } else if (value === null || value === false) {\n      element.removeAttribute(prop)\n    }\n  }\n}\n\nexport function removeElement(parent, element, node: vnode) {\n  function done() {\n    parent.removeChild(removeChildren(element, node))\n  }\n  if (node.props && node.props.onremove) {\n    // node.props.onremove(element, done)\n    invokeLaterStack.push(() => node.props.onremove(element, done))\n  } else {\n    done()\n  }\n}\n\nexport function removeChildren(element, node: vnode) {\n  // 表示该vnode不是文本节点\n  if (node.props || node.children) {\n    for (let i = 0, l = node.children.length; i < l; i++) {\n      let childNode = node.children[i]\n      if (typeof childNode !== 'string') {\n        removeChildren(element.children[i], childNode)\n      }\n    }\n    if (node.props && node.props.ondestroy) {\n      // node.props.ondestroy(element)\n      invokeLaterStack.push(() => node.props.ondestroy(element))\n    }\n  }\n  return element\n}\n\nexport function updateElement(element, props, oldProps, isSVG) {\n  let hasUpdate = false\n  for (let name in copy(oldProps, props)) {\n    let newValue = props[name]\n    let oldValue = name === 'value' || name === 'checked' ? element[name] : oldProps[name]\n    if (!isDeepEqual(newValue, oldValue)) {\n      let change = setELementProps(element, name, props[name] === undefined ? null : props[name], isSVG, oldProps[name])\n      hasUpdate = true\n    }\n  }\n  if (hasUpdate) {\n    // console.log('has update')\n  }\n  if (hasUpdate && props.onupdate) {\n    invokeLaterStack.push(() => props.onupdate(element, oldProps))\n  }\n}\n\nexport function getKey(node) {\n  return node && node.props && node.props.key !== undefined ? node.props.key : null\n}\n\nexport function copy(dest: {}, target?: {}) {\n  let val = {}\n  for (let key in dest) {\n    val[key] = dest[key]\n  }\n  for (let key in target) {\n    val[key] = target[key]\n  }\n  return val\n}\n\n// 忽略检测function Date  Regexp等引用类型。\nexport function isDeepEqual (o1, o2) {\n if (toString.call(o1) !== toString.call(o2)) {\n    return false\n  } else if (toString.call(o1) === '[object Array]') {\n    let length = o1.length > o2.length ? o1.length : o2.length\n    for (let i = 0; i < length; i++) {\n      let item1 = o1[i]\n      let item2 = o2[i]\n      if (isDeepEqual(item1, item2) === false) {\n        return false\n      }\n    }\n    return true\n  } else if (toString.call(o1) === '[object Object]') {\n    let keys = Object.keys(o1).concat(Object.keys(o2))\n    for (let i = 0, l = keys.length; i < l; i++) {\n      let item1 = o1[keys[i]]\n      let item2 = o2[keys[i]]\n      if (isDeepEqual(item1, item2) === false) {\n        return false\n      }\n    }\n    return true\n  } else {\n    // 忽略检测function Date  Regexp等引用类型。\n    return o1 === o2\n  }\n}","// \nimport { copy } from './utils'\nexport function _wireStateToActions(path, state, actions, callback) {\n  for (let key in actions) {\n    typeof actions[key] === 'function' ?\n      (function (key, action) {\n        actions[key] = function (data) {\n          if (typeof (data = action(data)) === \"function\") {\n            data = data(state, actions)\n          }\n          if (\n            data &&\n            // data !== (state = getState(path, globalState)) && 可用某个类库来提供比较，比如 immutable.js\n            !data.then // Promise\n          ) {\n            callback(path, copy(data))\n          }\n          return copy(state, data)\n        }\n      })(key, actions[key]) : _wireStateToActions(path.concat(key), state[key] || {}, actions[key], callback)\n  }\n}\n\nexport default function wireStateToActions(globalState, globalActions, callback) {\n  _wireStateToActions([], globalState, globalActions, function (path, newState) {\n    if (setState(path, globalState, newState)) {\n      callback(globalState)\n    }\n  })\n}\n\nfunction setState(path, root, state) {\n  path = [].concat(path)\n  let hasChange = false\n  if (path.length === 0) {\n    for (let key in state) {\n      if (root[key] !== state[key]) {\n        root[key] = state[key]\n        hasChange = true\n      }\n    }\n  } else {\n    for (let i = 0; i < path.length - 1; i++) {\n      root = root[path[i]]\n    }\n    for (let key in state) {\n      let lastPathKey = path.pop()\n      if (root[lastPathKey][key] !== state[key]) {\n        root[lastPathKey][key] = state[key]\n        hasChange = true\n      }\n    }\n  }\n  return hasChange\n}\n\nfunction getState (path, state) {\n  for (let i = 0; i < path.length - 1; i++) {\n    state = state[path[i]]\n  }\n  return state\n}","import { createElement, updateElement, removeElement, getKey, invokeLaterStack } from './utils'\n\nexport default function patch (parent: HTMLElement | SVGElement, element: null | HTMLElement | SVGElement, oldNode, node, isSVG?) {\n  if (node === oldNode) {\n  } else if (oldNode === null) {\n    element = parent.insertBefore(createElement(node, isSVG), element)\n  } else if (node.name && node.name === oldNode.name) {\n    updateElement(element, node.props, oldNode.props, isSVG = isSVG || node.name === 'svg')\n     let oldElements = []\n     let oldKeyed = {}\n     let newKeyed = {}\n    // 暂存包含key值的旧节点数据\n     for (let i = 0, l = oldNode.children.length; i < l; i++) {\n       oldElements[i] = element.childNodes[i]\n       let oldChild = oldNode.children[i]\n       let oldKey = getKey(oldChild)\n       if (oldKey !== null) {\n         oldKeyed[oldKey] = [oldElements[i], oldChild]\n       }\n     }\n\n     let newNodeIndex = 0\n     let oldNodeIndex = 0\n\n     while (newNodeIndex < node.children.length) {\n       let oldChild = oldNode.children[oldNodeIndex]\n       let newChild = node.children[newNodeIndex]\n\n       let oldKey = getKey(oldChild)\n       let newKey = getKey(newChild)\n      // 表示已经处理过该旧节点,比如有些场景是 旧节点的位置在新vnode中被前置了\n       if (newKeyed[oldKey]) {\n         oldNodeIndex++\n         continue\n       }\n       \n       if (newKey === null) {\n         if (oldKey === null) {\n           patch(element, oldElements[oldNodeIndex] || null, oldChild, newChild, isSVG)\n           newNodeIndex++\n         }\n        //  隐含条件，如果旧节点包含key而新节点没有，则需要移动到下一个旧节点去对比\n         oldNodeIndex++\n       } else {\n         let recycleNode = oldKeyed[newKey] || []\n         if (oldKey === newKey) {\n           patch(element, recycleNode[0], recycleNode[1], newChild, isSVG)\n           oldNodeIndex++\n         } else if (recycleNode[0]) {\n          //  旧节点该移位了\n          patch(element,\n                element.insertBefore(recycleNode[0], oldElements[oldNodeIndex]),\n                recycleNode[1],\n                newChild,\n                isSVG)\n         } else {\n          //  新节点\n           patch(element, oldElements[oldNodeIndex], null, newChild, isSVG)\n         }\n\n         newNodeIndex++\n         newKeyed[newKey] = newChild\n       }\n     }\n\n    //  新节点处理完后，检查是否还剩旧节点，然后将之删除\n    while (oldNodeIndex < oldNode.children.length) {\n      let oldChild = oldNode.children[oldNodeIndex]\n      if (getKey(oldChild) === null) {\n        removeElement(element, oldElements[oldNodeIndex], oldChild)\n      }\n      oldNodeIndex++\n    }\n\n    // 处理包含key的旧节点\n    for (let key in oldKeyed) {\n      if (!newKeyed[oldKeyed[key][1].props.key]) {\n        removeElement(element, oldKeyed[key][0], oldKeyed[key][1])\n      }\n    }\n  } else if (typeof node === 'string' || typeof node === 'number') {\n    element.nodeValue = node.toString()\n  } else {\n    // 替换整个节点\n    let _rEl\n    element = parent.insertBefore(createElement(node, isSVG), _rEl = element)\n    removeElement(parent, _rEl, oldNode)\n  }\n  return element\n}\n\nexport function rootPatch (parent: HTMLElement | SVGElement, element: null | HTMLElement | SVGElement, oldNode, node, isSVG?) {\n  element = patch(parent, element, oldNode, node)\n  let lifeCycle\n  // 确保调用是从最底层到外层\n  while(lifeCycle = invokeLaterStack.pop()) lifeCycle()\n  return element\n}","import  wireStateToActions from './wire_state_to_actions'\nimport patch from './patch'\n\nexport default function app (state, actions, views, container) {\n  if (!container) throw new Error('container not exist')\n  let rootElement = (container && container.children[0]) || null\n  let lastNode = null\n  let renderLock\n  scheduleRender()\n  wireStateToActions(state, actions, function (_state) {\n    state = _state\n    scheduleRender()\n  })\n\n  function render () {\n    renderLock = !renderLock\n    let newNode = views(state, actions)\n    rootElement = patch(container, rootElement, lastNode, (lastNode = newNode))\n  }\n\n  function scheduleRender() {\n    if (!renderLock) {\n      renderLock = !renderLock\n      setTimeout(render)\n    }\n  }\n}","import { vnode, ComponentFunc } from './interface'\n\n// 基于jsx语法\nexport default function h (name: string | ComponentFunc, props: null | Object, ...children: Array<vnode|string>):vnode {\n  // 组件方法,支持组件内部嵌套子元素或者子组件\n  if (typeof name === 'function') {\n    let vnode = name(props || {})\n    if (vnode.children && children.length > 0) {\n      vnode.children = vnode.children.concat(children)\n    }\n    return vnode\n  } else {\n    return {\n      name,\n      props: props || {},\n      children\n    }\n  }\n}\n\n","import app from '../src'\nimport h from '../src/h'\n\nconst state = {\n  count: 0,\n  test: {\n    a: 1,\n    b: 2\n  }\n}\n\nconst actions = {\n  down: value => state => ({ count: state.count - value }),\n  up: value => state => ({ count: state.count + value }),\n  test: {\n    down: value => state => ({ a: state.a - value }),\n  }\n}\n\nconst view = (state, actions) =>  (\n<div>\n  <h1>{state.count}</h1>\n  <button onclick={ () => actions.down(1) }>-</button>\n  <button onclick={ () => actions.up(1) }>+</button>\n</div>\n)\n\nvar mian = app(state, actions, view, document.body)\nconsole.log(mian)"]}